<html lang="en-us">
<script src="https://pygame-web.github.io/archives/0.9/pythons.js" type=module id=site data-LINES=57 data-CONSOLE=25
    data-python=python3.12 data-os=vtx,fs,snd,gui async defer>#<!--

print("""
Loading MARIO BATTLE V98 from mario_battle_pro_v98.data
    Pygbag Version : 0.9.2
    Python  : 3.12
""")

WIDTH=1024
HEIGHT=600
REFX = 1980
REFY = 1080

def u(real, ref, v):
    if abs(v)<0.9999999:
        result = int( (float(real)/100.0) * (v*1000))
        if v<0: return real-result
        return result
    return int( (real/ref) * v )

def ux(*argv):
    global WIDTH, REFX
    acc = 0
    for v in argv: acc += u(WIDTH, REFX, v)
    return acc

def uy(*argv):
    global HEIGHT, REFY
    acc = 0
    for v in argv: acc += u(HEIGHT, REFY, v)
    return acc

async def custom_site():
    import sys, asyncio, platform, json
    from pathlib import Path
    import embed
    import pygame

    platform.document.body.style.background = "#0a3250" # CYAN BLUE

    def compose():
        pygame.display.update()
        window.chromakey(None, *screen.get_colorkey(), 40)

    pygame.init()
    screen = pygame.display.set_mode([ux(.100),uy(.100)], pygame.SRCALPHA, 32)
    screen.set_colorkey( (0,0,0,0), pygame.RLEACCEL )
    screen.fill( (0,0,0,0) )
    compose()

    platform.window.transfer.hidden = true
    platform.window.canvas.style.visibility = "visible"

    apk = "mario_battle_pro_v98.data"
    bundle = "mario_battle_pro_v98"
    appdir = Path(f"/data/data/{bundle}")
    appdir.mkdir()

    cfg = {"io": "url", "type":"mount", "mount" : {"point" : appdir.as_posix(), "path" : "/"}, "path" : f"/ => {appdir.as_posix()}"}
    track = platform.window.MM.prepare(apk, json.dumps(cfg))

    while not track.ready: await asyncio.sleep(.1)
    platform.run_main(PyConfig, loaderhome= appdir / "assets", loadermain=None)
    while embed.counter()<0: await asyncio.sleep(.1)

    main = appdir / "assets" / "main.py"
    await TopLevel_async_handler.start_toplevel(platform.shell, console=window.python.config.debug)
    __import__(__name__).__file__ = str(main)

    await shell.runpy(main)

import asyncio
asyncio.run( custom_site() )

# BEGIN BLOCK
# --></script>

<head>
    <script type="application/javascript">
        config = {
            xtermjs: "1",
            _sdl2: "canvas",
            user_canvas: 0,
            user_canvas_managed: 0,
            ume_block: 1,
            can_close: 0,
            archive: "mario_battle_pro_v98",
            gui_debug: 3,
            cdn: "https://pygame-web.github.io/archives/0.9/",
            autorun: 0,
            PYBUILD: "3.12"
        }
    </script>
    <title>MARIO BATTLE V98</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body {
            margin: 0;
            background-color: #0a3250;
            font-family: arial;
        }

        canvas.emscripten {
            border: 0 none;
            background-color: transparent;
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
            z-index: 5;
        }

        #transfer {
            text-align: center;
            padding-top: 20px;
            color: white;
        }
    </style>
</head>

<body>
    <div id="transfer" align=center>
        <div id="status">Loading V98 Arena...</div>
        <progress value="0" max="100" id="progress"></progress>
    </div>
    <canvas class="emscripten" id="canvas" width="1px" height="1px" oncontextmenu="event.preventDefault()"
        tabindex=1></canvas>
    <div id="pyconsole" hidden>
        <div id="terminal"></div>
    </div>
</body>

</html>