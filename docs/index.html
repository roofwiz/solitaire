<!doctype html>
<html lang="en-us">
<head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Mario Tetris - Premium Edition</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"/>
    <style>
        body { margin: 0; background-color: #000; color: #FF1493; font-family: sans-serif; width: 100vw; height: 100vh; display: flex; justify-content: center; align-items: center; touch-action: none; overflow: hidden; }
        canvas.emscripten { width: 100vw; height: 100vh; object-fit: contain; }
        #loading-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 100; }
    </style>
</head>
<body>
    <div id="loading-overlay">
        <div style="font-size: 24px;">LOADING MARIO TETRIS...</div>
        <div style="margin-top:20px; color:#555;">VER 1.1.3-CACHE-BUST</div>
    </div>
    <canvas class="emscripten" id="canvas" oncontextmenu="event.preventDefault()" tabindex="1"></canvas>
    <script async src="https://pygame-web.github.io/archives/0.9/pygbag.js"></script>
    <script type="pygbag">
        #--
        import asyncio
        import platform
        from pathlib import Path
        async def main_loader():
            appdir = Path("/data/data/mario-tetris")
            if not appdir.exists(): appdir.mkdir()
            apk = "mario-tetris-v113.apk"
            platform.window.MM.add_mount({"io":"url", "type":"mount", "mount":{"point":appdir.as_posix(), "path":apk}})
            while not platform.window.MM.is_mounted(appdir.as_posix()): await asyncio.sleep(.1)
            import sys; sys.path.append(appdir.as_posix()); import main
            game = main.Tetris()
            await game.run()
        asyncio.run(main_loader())
        #--
    </script>
</body>
</html>
